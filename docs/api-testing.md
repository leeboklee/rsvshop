# RSVShop API 테스트 가이드

## 🚀 자동화된 테스트 도구

RSVShop 프로젝트에는 데이터베이스 조회와 API 상태를 자동으로 테스트할 수 있는 도구들이 포함되어 있습니다.

## 📋 사용 가능한 테스트 명령어

### 1. 빠른 테스트 (Shell Script)
```bash
npm run test:quick
# 또는
./scripts/quick-test.sh
```

**테스트 항목:**
- ✅ 서버 상태 확인 (포트 4900)
- ✅ 호텔 API 응답 테스트
- ✅ 데이터베이스 연결 테스트
- ✅ Prisma 클라이언트 상태 확인

### 2. 상세 테스트 (JavaScript)
```bash
npm run test:api
# 또는
node scripts/test-api.js
```

**테스트 항목:**
- 🔍 서버 상태 확인
- 🗄️ 데이터베이스 연결 및 스키마 확인
- 📊 테이블별 데이터 수량 확인
- 🔌 API 엔드포인트 테스트
- 📈 상세한 응답 분석

## 🎯 테스트 결과 예시

### 빠른 테스트 결과
```
🚀 RSVShop 빠른 테스트 시작...
==================================
📡 서버 상태 확인 중...
✅ 서버가 정상적으로 실행 중입니다 (포트 4900)

🔍 API 테스트 중...
  - 호텔 API 테스트...
    ✅ 호텔 API 정상 작동
    📊 호텔 수: 1개

🗄️  데이터베이스 연결 테스트...
✅ 데이터베이스 연결 성공

🔧 Prisma 클라이언트 상태 확인...
✅ Prisma 클라이언트 생성 성공

🎯 테스트 완료!
==================================
```

### 상세 테스트 결과
```
============================================================
🔍 RSVShop API 자동 테스트 시작
============================================================
ℹ️  테스트 시작 시간: 2025. 8. 29. 오전 1:39:28

----------------------------------------
📋 서버 상태 확인
----------------------------------------
✅ 서버가 정상적으로 실행 중입니다

----------------------------------------
📋 데이터베이스 연결 테스트
----------------------------------------
✅ 데이터베이스 연결 성공
ℹ️  PostgreSQL 버전: PostgreSQL 16.9
ℹ️  테이블 수: 16개
ℹ️  호텔 데이터: 1개
  - 테스트 호텔 (ACTIVE)
ℹ️  사용자 데이터: 2개
  - admin@rsvshop.com (ADMIN)
  - user1@example.com (USER)

----------------------------------------
📋 API 테스트
----------------------------------------
✅ 호텔 목록 API: 200 OK
ℹ️    호텔 수: 1개
✅ 메인 페이지: 200 OK
✅ 관리자 페이지: 200 OK

============================================================
🔍 테스트 완료
============================================================
✅ 모든 테스트가 완료되었습니다!
```

## 🛠️ 문제 해결

### 서버가 실행되지 않는 경우
```bash
# 서버 시작
npm run dev

# 백그라운드에서 실행
nohup npm run dev > dev-server.log 2>&1 &
```

### 데이터베이스 연결 오류
```bash
# Prisma 클라이언트 재생성
npm run db:generate

# 데이터베이스 동기화
npm run db:push

# 시드 데이터 추가
npm run db:seed
```

### API 오류
```bash
# 서버 재시작
pkill -f "next dev" && npm run dev

# 로그 확인
tail -f dev-server.log
```

## 🔧 커스터마이징

### 새로운 API 테스트 추가
`scripts/test-api.js` 파일의 `testAPIs` 함수에 새로운 API를 추가할 수 있습니다:

```javascript
const apis = [
  // 기존 API들...
  { name: '새로운 API', url: `${baseURL}/api/new-endpoint`, method: 'GET' },
];
```

### 테스트 간격 조정
API 테스트 간의 대기 시간을 조정할 수 있습니다:

```javascript
// API 간 간격 (밀리초)
await new Promise(resolve => setTimeout(resolve, 1000));
```

## 📊 모니터링

### 실시간 로그 확인
```bash
# 서버 로그 실시간 확인
tail -f dev-server.log

# API 요청 로그 확인
grep "API" dev-server.log
```

### 정기적인 테스트 실행
```bash
# 5분마다 테스트 실행
watch -n 300 npm run test:quick

# 매시간 상세 테스트
watch -n 3600 npm run test:api
```

## 🎉 결론

이 자동화된 테스트 도구들을 사용하면 RSVShop 프로젝트의 상태를 빠르고 정확하게 확인할 수 있습니다. 

- **빠른 테스트**: 일상적인 상태 확인
- **상세 테스트**: 문제 진단 및 디버깅
- **자동화**: 수동 테스트 시간 절약
- **시각적 피드백**: 색상 코드로 상태 구분

정기적으로 테스트를 실행하여 시스템의 안정성을 유지하세요! 🚀
